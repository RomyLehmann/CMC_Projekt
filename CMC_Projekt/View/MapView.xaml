<UserControl x:Class="CMC_Projekt.View.MapView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White">
    <Grid>
        <!-- Stationskarte -->
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <Border Width="957" Height="900" 
                    BorderBrush="Black" 
                    BorderThickness="2"
                    Background="WhiteSmoke">

                <Canvas>
                    <!-- Aufenthaltsraum -->
                    <Polygon Points="420,20 587,20 627,80 380,80"
                             Fill="#FFE0B2" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="440" Canvas.Top="45"
                               Text="Aufenthaltsraum" FontSize="12" FontWeight="Bold"/>

                    <!-- Hauptgang -->
                    <Rectangle Canvas.Left="371" Canvas.Top="81"
                               Width="249" Height="451"
                               Fill="LightGray" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="463" Canvas.Top="366"
                               Text="Hauptgang" FontSize="14" FontWeight="Bold"/>

                    <!-- Zimmer 1 -->
                    <Rectangle Canvas.Left="240" Canvas.Top="81" Width="131" Height="70"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="254" Canvas.Top="86"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="271" Canvas.Top="109" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="1|B001|Frei|Sauber"/>
                    <Ellipse Canvas.Left="301" Canvas.Top="109" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="1|B001-2|Belegt|Sauber"/>

                    <!-- Zimmer 2 -->
                    <Rectangle Canvas.Left="240" Canvas.Top="149" Width="131" Height="70"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="254" Canvas.Top="154"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="268" Canvas.Top="179" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="2|B002|Belegt|Sauber"/>
                    <Ellipse Canvas.Left="298" Canvas.Top="179" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="2|B002-2|Frei|Sauber"/>

                    <!-- WC -->
                    <Rectangle Canvas.Left="331" Canvas.Top="134" Width="40" Height="35"
                               Fill="#E1F5FE" Stroke="Black" StrokeThickness="1"/>
                    <TextBlock Canvas.Left="343" Canvas.Top="146" Text="WC" FontSize="9"/>

                    <!-- Zimmer 3 -->
                    <Rectangle Canvas.Left="240" Canvas.Top="218" Width="131" Height="70"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="254" Canvas.Top="225"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="265" Canvas.Top="250" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="3|B003|Frei|Sauber"/>
                    <Ellipse Canvas.Left="295" Canvas.Top="250" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="3|B003-2|Belegt|Nicht sauber"/>

                    <!-- WC -->
                    <Rectangle Canvas.Left="331" Canvas.Top="270" Width="40" Height="35"
                               Fill="#E1F5FE" Stroke="Black" StrokeThickness="1"/>
                    <TextBlock Canvas.Left="343" Canvas.Top="282" Text="WC" FontSize="9"/>

                    <!-- Zimmer 4 -->
                    <Rectangle Canvas.Left="620" Canvas.Top="151" Width="131" Height="70"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="663" Canvas.Top="156"
                               Text="1-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="700" Canvas.Top="182" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="4|B004|Belegt|Sauber"/>
                    <Rectangle Canvas.Left="620" Canvas.Top="151" Width="31" Height="28"
                               Fill="#E1F5FE" Stroke="Black" StrokeThickness="1"/>
                    <TextBlock Canvas.Left="627" Canvas.Top="158" Text="WC" FontSize="9"/>

                    <!-- Zimmer 5 -->
                    <Rectangle Canvas.Left="620" Canvas.Top="220" Width="131" Height="68"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="662" Canvas.Top="222"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="662" Canvas.Top="246" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="5|B005|Frei|Sauber"/>
                    <Ellipse Canvas.Left="700" Canvas.Top="246" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="5|B005-2|Belegt|Nicht sauber"/>

                    <!-- Zimmer 6 -->
                    <Rectangle Canvas.Left="620" Canvas.Top="287" Width="131" Height="69"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="660" Canvas.Top="297"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="670" Canvas.Top="323" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="6|B006|Belegt|Sauber"/>
                    <Ellipse Canvas.Left="700" Canvas.Top="323" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="6|B006-2|Frei|Sauber"/>
                    <Rectangle Canvas.Left="620" Canvas.Top="272" Width="35" Height="30"
                               Fill="#E1F5FE" Stroke="Black" StrokeThickness="1"/>
                    <TextBlock Canvas.Left="630" Canvas.Top="282" Text="WC" FontSize="9"/>

                    <!-- Treppe -->
                    <Rectangle Canvas.Left="620" Canvas.Top="81" Width="131" Height="70"
                               Fill="#BDBDBD" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="670" Canvas.Top="109"
                               Text="Treppe" FontSize="11" FontWeight="Bold"/>

                    <!-- Zimmer 7 -->
                    <Rectangle Canvas.Left="240" Canvas.Top="287" Width="131" Height="70"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="253" Canvas.Top="293"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="265" Canvas.Top="316" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="7|B007|Frei|Sauber"/>
                    <Ellipse Canvas.Left="295" Canvas.Top="316" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="7|B007-2|Belegt|Sauber"/>

                    <!-- Zimmer 8 -->
                    <Rectangle Canvas.Left="240" Canvas.Top="356" Width="131" Height="70"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="257" Canvas.Top="362"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="265" Canvas.Top="380" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="8|B008|Belegt|Nicht sauber"/>
                    <Ellipse Canvas.Left="295" Canvas.Top="380" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="8|B008-2|Frei|Sauber"/>

                    <!-- Zimmer 9 -->
                    <Rectangle Canvas.Left="69" Canvas.Top="401" Width="125" Height="131"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="95" Canvas.Top="418"
                               Text="4-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="102" Canvas.Top="441" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="9|B009|Frei|Sauber"/>
                    <Ellipse Canvas.Left="132" Canvas.Top="441" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="9|B009-2|Belegt|Sauber"/>
                    <Ellipse Canvas.Left="102" Canvas.Top="468" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="9|B009|Frei|Sauber"/>
                    <Ellipse Canvas.Left="132" Canvas.Top="468" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="9|B009-2|Belegt|Sauber"/>
                    <Rectangle Canvas.Left="111" Canvas.Top="496" Width="40" Height="35"
                               Fill="#E1F5FE" Stroke="Black" StrokeThickness="1"/>
                    <TextBlock Canvas.Left="124" Canvas.Top="508" Text="WC" FontSize="9"/>

                    <!-- Zimmer 10 -->
                    <Rectangle Canvas.Left="620" Canvas.Top="355" Width="131" Height="70"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="660" Canvas.Top="361"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="670" Canvas.Top="383" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="10|B010|Belegt|Sauber"/>
                    <Ellipse Canvas.Left="700" Canvas.Top="383" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="10|B010-2|Frei|Sauber"/>

                    <!-- Zimmer 11 -->
                    <Rectangle Canvas.Left="712" Canvas.Top="401" Width="86" Height="131"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="727" Canvas.Top="415"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="738" Canvas.Top="461" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="11|B011|Frei|Sauber"/>
                    <Ellipse Canvas.Left="768" Canvas.Top="461" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="11|B011-2|Belegt|Nicht sauber"/>

                    <!-- Zimmer 12 -->
                    <Rectangle Canvas.Left="798" Canvas.Top="401" Width="70" Height="131"
                               Fill="LightBlue" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="801" Canvas.Top="414"
                               Text="2-Bettzimmer" FontSize="10" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="808" Canvas.Top="460" Width="14" Height="14"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="12|B012|Belegt|Sauber"/>
                    <Ellipse Canvas.Left="838" Canvas.Top="460" Width="14" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"
                             Cursor="Hand" MouseLeftButtonDown="Bett_Click"
                             Tag="12|B012-2|Frei|Sauber"/>

                    <!-- Unterer Gang -->
                    <Rectangle Canvas.Left="69" Canvas.Top="532" Width="855" Height="132"
                               Fill="LightGray" Stroke="Black" StrokeThickness="1"/>
                    <TextBlock Canvas.Left="458" Canvas.Top="589"
                               Text="Hauptgang" FontSize="14" FontWeight="Bold"/>

                    <!-- Treppen unten -->
                    <Rectangle Canvas.Left="296" Canvas.Top="664" Width="101" Height="100"
                               Fill="#BDBDBD" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="326" Canvas.Top="709"
                               Text="Treppe" FontSize="11" FontWeight="Bold"/>
                    <Rectangle Canvas.Left="852" Canvas.Top="664" Width="72" Height="100"
                               Fill="#BDBDBD" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="868" Canvas.Top="709"
                               Text="Treppe" FontSize="11" FontWeight="Bold"/>

                    <!-- Zusätzliche Räume -->
                    <Rectangle Canvas.Left="69" Canvas.Top="664" Width="107" Height="100"
                               Fill="#F5F5F5" Stroke="Black" StrokeThickness="1"/>
                    <Rectangle Canvas.Left="176" Canvas.Top="664" Width="120" Height="100"
                               Fill="#F5F5F5" Stroke="Black" StrokeThickness="1"/>
                    <Rectangle Canvas.Left="397" Canvas.Top="664" Width="241" Height="100"
                               Fill="#F5F5F5" Stroke="Black" StrokeThickness="1"/>
                    <Rectangle Canvas.Left="638" Canvas.Top="664" Width="78" Height="100"
                               Fill="#F5F5F5" Stroke="Black" StrokeThickness="1"/>
                    <Rectangle Canvas.Left="716" Canvas.Top="664" Width="136" Height="100"
                               Fill="#F5F5F5" Stroke="Black" StrokeThickness="1"/>

                    <!-- Labor -->
                    <Rectangle Canvas.Left="868" Canvas.Top="461" Width="56" Height="71"
                               Fill="#FFE0B2" Stroke="Black" StrokeThickness="1"/>
                    <TextBlock Canvas.Left="880" Canvas.Top="489" Text="Labor" FontSize="10"/>

                    <!-- Legende -->
                    <Rectangle Canvas.Left="60" Canvas.Top="772" Width="108" Height="114"
                               Fill="White" Stroke="Black" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="68" Canvas.Top="780"
                               Text="Legende" FontSize="9" FontWeight="Bold"/>
                    <Ellipse Canvas.Left="72" Canvas.Top="808" Width="16" Height="14"
                             Fill="Green" Stroke="DarkGreen" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="94" Canvas.Top="806" Text="frei" FontSize="8"/>
                    <Ellipse Canvas.Left="72" Canvas.Top="836" Width="16" Height="16"
                             Fill="Red" Stroke="DarkRed" StrokeThickness="2"/>
                    <TextBlock Canvas.Left="94" Canvas.Top="834" Text="belegt" FontSize="8"/>
                </Canvas>
            </Border>
        </ScrollViewer>

        <!-- ============================================ -->
        <!-- OPTIMIERTES POPUP: 300x220px, X-Button: 35x35px -->
        <!-- ============================================ -->
        <Border x:Name="BettInfoPopup"
                Width="300"
                Height="220"
                Background="White"
                BorderBrush="#2C3E50"
                BorderThickness="3"
                CornerRadius="8"
                Visibility="Collapsed"
                Panel.ZIndex="1000"
                HorizontalAlignment="Left"
                VerticalAlignment="Top">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="8" Opacity="0.6" BlurRadius="15"/>
            </Border.Effect>
            <Border.RenderTransform>
                <TranslateTransform x:Name="PopupTransform"/>
            </Border.RenderTransform>

            <Grid>
                <!-- SCHLIESSEN-BUTTON: 35x35px, gut klickbar -->
                <Button x:Name="CloseButton"
                        Width="35"
                        Height="35"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="0,-2,-2,0"
                        Background="#E74C3C"
                        BorderBrush="#C0392B"
                        BorderThickness="2"
                        Cursor="Hand"
                        Click="ClosePopup_Click"
                        ToolTip="Schließen"
                        Panel.ZIndex="1001">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="0,8,0,8">
                                            <TextBlock Text="✕" 
                                                       FontSize="18" 
                                                       FontWeight="Bold"
                                                       Foreground="White"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#C0392B"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter Property="Background" Value="#A93226"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- Popup-Inhalt -->
                <StackPanel Margin="20,18,20,18">
                    <TextBlock x:Name="txtBettNummer"
                               Text="Bett: B001"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="#2C3E50"
                               Margin="0,0,0,12"/>

                    <TextBlock x:Name="txtZimmer"
                               Text="Zimmer: 1"
                               FontSize="14"
                               Foreground="#34495E"
                               Margin="0,0,0,18"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <TextBlock Text="Status:" 
                                   FontSize="13"
                                   FontWeight="Bold"
                                   Foreground="#7F8C8D"
                                   Width="75"/>
                        <TextBlock x:Name="txtStatus"
                                   Text="Belegt"
                                   FontSize="13"
                                   FontWeight="Bold"
                                   Foreground="#E74C3C"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Wartung:" 
                                   FontSize="13"
                                   FontWeight="Bold"
                                   Foreground="#7F8C8D"
                                   Width="75"/>
                        <TextBlock x:Name="txtWartung"
                                   Text="Sauber"
                                   FontSize="13"
                                   FontWeight="Bold"
                                   Foreground="#27AE60"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>